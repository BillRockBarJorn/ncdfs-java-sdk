<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>首页</title>
    <link rel="stylesheet" href="layui/css/layui.css">
</head>
<body>
<div style="margin: 40px  100px">
    <div class="layui-inline search-input" style="width: 240px;float: left">
        <input type="text" class="layui-input" id="queryByName" placeholder="请输入agent名称"
               style="width: 240px;">
    </div>
    <button type="button" class="page-btn primary-btn mgl-15 query-btn">查询</button>
    <table id="demo" lay-filter="test"></table>
</div>

<script src="/js/jquery-1.11.3.min.js"></script>
<!-- body 末尾处引入 layui -->
<script src="/layui/layui.js"></script>
<script>
    layui.use('table', function () {
        var table = layui.table;

        table.render({
            elem: '#demo'
            , url: '/eics/listObject' // 后端接口
            , page: true
            , limits: [20, 50, 100]
            , limit: 20
            , cols: [[
                {field: 'bucketName', title: 'bucketName', width: 200, sort: true}
                , {field: 'key', title: '文件名'}
                , {field: 'size', title: '文件大小', width: 120, sort: true}
                , {field: 'versionId', title: '版本id'}
                , {
                    title: '创建日期', width: 200, sort: true, templet: function (data) {
                        return timestampToTime(data.lastModified);
                    }
                }
                , {
                    title: '操作', width: 200, align: 'center', templet: function (d) {
                        return '<div data-resource-id="' + d.agentId + '">' +
                            '<a href="#" class="color-purple evacuate">下载</a>\n' +
                            '</div></div>'
                    }
                }
            ]]
            , parseData: function (res) {
                console.log(res)
                return {
                    "code": "0",
                    "msg": res.msg,
                    "count": res.totalCount,
                    "page": res.currentPage,
                    "limit": res.everyPage,
                    "data": res.data
                };
            }
        });
    });

    $('.query-btn').on('click', function () {
        console.log('aaaa')
    })


    function timestampToTime(timestamp) {
        // 时间戳为10位需*1000，时间戳为13位不需乘1000
        var date = new Date(timestamp);
        var Y = date.getFullYear() + "-";
        var M =
            (date.getMonth() + 1 < 10
                ? "0" + (date.getMonth() + 1)
                : date.getMonth() + 1) + "-";
        var D = (date.getDate() < 10 ? "0" + date.getDate() : date.getDate()) + " ";
        var h = date.getHours() + ":";
        var m = date.getMinutes() + ":";
        var s = date.getSeconds();
        return Y + M + D + h + m + s;
    }

</script>


</body>

<style>
    .page-btn {
        padding: 0 19px;
        line-height: 32px;
        border-radius: 2px;
        cursor: pointer;
        margin-left: 12px;
    }
</style>

</html>
